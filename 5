M(5.m(6.8))

#include <iostream>
#include <fstream>
#include <string>
using namespace::std;
using TElem = char;

struct Stack {
	TElem data;
	Stack* next;
};

void pushStack(Stack*& top, TElem x) {
	Stack* t = new Stack;
	t->data = x;
	t->next = top;
	top = t;
}

TElem popStack(Stack*& top) {
	TElem x = top->data;
	if (top->next == NULL) {
		delete top;
		top = NULL;
	}
	else {
		Stack* t = new Stack;
		t = top;
		top = top->next;
		t->next = NULL;
		delete t;
	}
	return x;
}

int M(int a, int b) {
	if (a > b)
		return a;
	else
		return b;
}

int m(int a, int b) {
	if (a < b)
		return a;
	else
		return b;
}

int main() {
	ifstream A;
	A.open("A.txt");
	if (!A.is_open()) {
		cout << "Error";
		return 0;
	}
	string str;
	getline(A, str);
	Stack* top = new Stack;
	top->data = str[0];
	top->next = NULL;
	for (int i = 0; i < str.length(); i++){
		if (str[i] == 'M' || str[i] == 'm' || (str[i] >= '0' && str[i] <= '9'))
			pushStack(top, str[i]);
		else
			if (str[i] == ')') {
				char operand1 = popStack(top);
				char operand2 = popStack(top);
				char operation = popStack(top);
				if (operation == 'm')
					pushStack(top, m(operand1, operand2));
				else
					pushStack(top, M(operand1, operand2));
			}
	}
	cout << top->data;
	A.close();
	return 0;
}
