#include <iostream>
#include <string>
using namespace::std;

struct Stack {
	char data;
	Stack* next;
};

void initStack(Stack* head, char elem) {
	head->data = elem;
	head->next = NULL;
}

void pushStack(Stack** head, char elem) {
	Stack* t = new Stack;
	initStack(t, elem);
	t->next = *head;
	*head = t;
}

Stack* popStack(Stack** head) {
	Stack* t = *head;
	*head = (*head)->next;
	t->next = NULL;
	return t;
}

int main() {
	setlocale(LC_ALL, "RU");
	Stack* s = new Stack;
	initStack(s, '0');
	cout << "Введите текст: ";
	bool f = 0;
	char ch;
	do {
		cin >> ch;
		if (ch == '(' || ch == '[' || ch == '{' || ch == '}' || ch == ']' || ch == ')')
			if ((ch == ')' || ch == ']' || ch == '}') && s->data == '0')
				f = 1;
			else
				switch (ch) {
				case ')':
					if (popStack(&s)->data != '(')
						f = 1;
					break;
				case ']':
					if (popStack(&s)->data != '[')
						f = 1;
					break;
				case '}':
					if (popStack(&s)->data != '{')
						f = 1;
					break;
				default:
					pushStack(&s, ch);
					break;
				}
	} while (ch != '0');
	if (s->next != NULL)
		f = 1;
	if (f)
		cout << "Вы ошиблись!";
	else
		cout << "Всё правильно!";
	return 0;
}
