#include <iostream>
#include <fstream>
using namespace::std;
using TElem = char;

struct Stack {
	TElem data;
	Stack* next;
};

void pushStack(Stack*& top, TElem x) {
	Stack* t = new Stack;
	t->data = x;
	t->next = top;
	top = t;
}

TElem popStack(Stack*& top) {
	TElem x = top->data;
	if (top->next == NULL) {
		delete top;
		top = NULL;
	}
	else {
		Stack* t = new Stack;
		t = top;
		top = top->next;
		t->next = NULL;
		delete t;
	}
	return x;
}

int main() {
	setlocale(LC_ALL, "ru");
	ifstream A;
	A.open("A.txt");
	if (!A.is_open()) {
		cout << "Error";
		return 0;
	}
	char ch;
	Stack* top = new Stack;
	A >> ch;
	top->data = ch;
	top->next = NULL;
	while (!A.eof()) {
		A >> ch;
		pushStack(top, ch);
	}
	int a = 0, b = 0;
	bool f = 1;
	while (top) {
		ch = popStack(top);
		if (ch != '+' && ch != '-') {
			b = a;
			a = ch - '0';
		}
		else {
			if (a == '+' || a == '-' || b == '+' || b == '-') {
				f = 0;
			}
			a = '+';
			b = '+';
		}
	}
	if (f)
		cout << "Правильно!";
	else
		cout << "Неправильно!";
	A.close();
	return 0;
}
